<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for contracts/SupeRareV2.sol</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">contracts/</a> SupeRareV2.sol
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">45.71% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>16/35</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">23.33% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>7/30</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">37.5% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>6/16</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">51.11% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>23/45</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">45×</span>
<span class="cline-any cline-yes">45×</span>
<span class="cline-any cline-yes">45×</span>
<span class="cline-any cline-yes">45×</span>
<span class="cline-any cline-yes">45×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-yes">4×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">// SPDX-License-Identifier: MIT
pragma solidity =0.7.6;
pragma abicoder v2;
&nbsp;
import "hardhat/console.sol";
import "./IMockV1.sol";
import "./ISupeRareV2.sol";
import "@openzeppelin/contracts/access/Ownable.sol";
import "@openzeppelin/contracts/token/ERC721/ERC721.sol";
&nbsp;
/**
 * @notice SupeRareV2.sol: Wrapper contract to the SupRare.sol V1 contract
Is an ERC721 compliant NFT contract that mints V2 tokens for pegged V1 tokens.
 */
&nbsp;
contract SupeRareV2 is Ownable, ISupeRareV2, ERC721, IERC721Receiver {   
    using Address for address;  
    address private  OriginalSupeRareAddr_;
    IMockV1 private supe;
    address private owner_;
    string private _name = "SupeRare";
&nbsp;
    // Token symbol
    string private _symbol = "SUPR";
&nbsp;
    /**
     * @dev Maintain a mapping of the original owner address to V1 TokenID to minted V2 TokenID
     **/
    mapping(address =&gt; mapping (uint256=&gt;uint256)) public ownerAddrToV1toV2TokenId; 
&nbsp;
    /**
     * @dev Owner of V1 token needs to get added to the white list
     **/
    mapping(uint256 =&gt; address) public ownerWhiteList;
&nbsp;
&nbsp;
    mapping(uint256=&gt;bool) private v1_v2_peg; 
&nbsp;
&nbsp;
&nbsp;
    /**
     * @dev The V1 token has been deposited into this contract and is pegged
     **/
    event Pegged( uint256 indexed v1tokenId);
&nbsp;
       /**
     * @dev Owner of V1 token has been added to the whitelist 
     **/
    event OwnerWhitelisted(address indexed v1owner, uint256 indexed v1tokenId);
&nbsp;
       /**
     * @dev Triggered when a V1 token is deposited to mint a V2 token 
     **/
    event MintV2(address indexed v1owner, uint256 indexed v2tokenId);
&nbsp;
       /**
     * @dev Triggered when a V2 token is burned to withdraw the v2 token
     **/
    event WithdrawV1(address indexed v2owner, uint256 indexed v2tokenId);
      
       /**
     * @dev Triggered when a the v2tokenId's tokenURI is set
     **/
    event TokenURISet(uint256 _tokenId,string _tokenURI);
&nbsp;
       /**
     * @dev Triggered when a the v2tokenId's tokenURI is set
     **/
      event  BaseURISet(string _baseURI);
&nbsp;
    // Equals to `bytes4(keccak256("onERC721Received(address,address,uint256,bytes)"))`
    // which can be also obtained as `IERC721Receiver(0).onERC721Received.selector`
    bytes4 private constant _ERC721_RECEIVED = 0x150b7a02;
/*
     *     bytes4(keccak256('balanceOf(address)')) == 0x70a08231
     *     bytes4(keccak256('ownerOf(uint256)')) == 0x6352211e
     *     bytes4(keccak256('approve(address,uint256)')) == 0x095ea7b3
     *     bytes4(keccak256('getApproved(uint256)')) == 0x081812fc
     *     bytes4(keccak256('setApprovalForAll(address,bool)')) == 0xa22cb465
     *     bytes4(keccak256('isApprovedForAll(address,address)')) == 0xe985e9c5
     *     bytes4(keccak256('transferFrom(address,address,uint256)')) == 0x23b872dd
     *     bytes4(keccak256('safeTransferFrom(address,address,uint256)')) == 0x42842e0e
     *     bytes4(keccak256('safeTransferFrom(address,address,uint256,bytes)')) == 0xb88d4fde
     *
     *     =&gt; 0x70a08231 ^ 0x6352211e ^ 0x095ea7b3 ^ 0x081812fc ^
     *        0xa22cb465 ^ 0xe985e9c5 ^ 0x23b872dd ^ 0x42842e0e ^ 0xb88d4fde == 0x80ac58cd
     */
    bytes4 private constant _INTERFACE_ID_ERC721 = 0x80ac58cd;
&nbsp;
    /*
     *     bytes4(keccak256('name()')) == 0x06fdde03
     *     bytes4(keccak256('symbol()')) == 0x95d89b41
     *     bytes4(keccak256('tokenURI(uint256)')) == 0xc87b56dd
     *
     *     =&gt; 0x06fdde03 ^ 0x95d89b41 ^ 0xc87b56dd == 0x5b5e139f
     */
    bytes4 private constant _INTERFACE_ID_ERC721_METADATA = 0x5b5e139f;
&nbsp;
    /*
     *     bytes4(keccak256('totalSupply()')) == 0x18160ddd
     *     bytes4(keccak256('tokenOfOwnerByIndex(address,uint256)')) == 0x2f745c59
     *     bytes4(keccak256('tokenByIndex(uint256)')) == 0x4f6ccce7
     *
     *     =&gt; 0x18160ddd ^ 0x2f745c59 ^ 0x4f6ccce7 == 0x780e9d63
     */
    bytes4 private constant _INTERFACE_ID_ERC721_ENUMERABLE = 0x780e9d63;
&nbsp;
&nbsp;
 
  
          constructor (address OriginalSupeRareAddr_) ERC721 (_name,_symbol){
        OriginalSupeRareAddr_ = OriginalSupeRareAddr_;
        supe = IMockV1(OriginalSupeRareAddr_);
        _registerInterface(_INTERFACE_ID_ERC721);
        _registerInterface(_INTERFACE_ID_ERC721_METADATA);
        _registerInterface(_INTERFACE_ID_ERC721_ENUMERABLE); } 
   
&nbsp;
 
&nbsp;
    /**
  * @dev Guarantees msg.sender is owner of the v2 token 
  * @param _tokenId is the v2 tokenId
  */
<span class="fstat-no" title="function not covered" >  modifier onlyOwnerOfToken(uint256 _tokenId) {</span>
<span class="cstat-no" title="statement not covered" >    require(ERC721.ownerOf(_tokenId) == _msgSender(),"SupeRareV2: Sender isn't the owner of the V2 token!")</span>;
    _;
  }
&nbsp;
      /**
     * @dev Guarantees msg.sender is owner of the v1 token on the original SupeRareV1 contract
     * @param _tokenId uint256 ID of the token to validate its ownership belongs to msg.sender
     */
  modifier onlyOwnerOfV1(uint256 _tokenId) {
    <span class="missing-if-branch" title="else path not taken" >E</span>require(supe.ownerOf(_tokenId) == _msgSender(),"SupeRareV2: Sender isn't the owner of the V1 Token!");
    _;
  }
&nbsp;
&nbsp;
    /**
     * @dev Guarantees msg.sender is whitelisted
     * @param _tokenId is the V1 tokenId
     */
    modifier onlyWhitelisted(uint256 _tokenId) {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(ownerWhiteList[_tokenId] == _msgSender(),"SupeRareV2: Sender isn't whitelisted or approved for this operation!");
        _;
    }
&nbsp;
&nbsp;
        /**
     * @dev Guarantees that the V1:V2 tokens are pegged
     * @param _tokenId is the V1 tokenId
     */
<span class="fstat-no" title="function not covered" >    modifier onlyPegged(uint256 _tokenId) {</span>
<span class="cstat-no" title="statement not covered" >        require(v1_v2_peg[_tokenId],"SupeRareV2: The v1:v2 token peg hasn't been established!")</span>;
        _;
    }
&nbsp;
&nbsp;
    /**
     * @dev getAddedToWhitelist: Owner gets added to the whitelist based on the v1 token ownership
     * @param _v1TokenId the v1 tokenID 
     * @return bool true if the operation succeeds
     */
    function getAddedToWhitelist(uint256 _v1TokenId) external virtual override <span class="missing-if-branch" title="else path not taken" >E</span>onlyOwnerOfV1(_v1TokenId) returns (bool){
        <span class="missing-if-branch" title="else path not taken" >E</span>require(ownerWhiteList[_v1TokenId] != _msgSender(),"SupeRareV2: Account already whitelisted!");
         ownerWhiteList[_v1TokenId] = _msgSender();
        emit OwnerWhitelisted(_msgSender(),_v1TokenId);
         return true;
    }
&nbsp;
    /**
     * @dev isWhitelisted: Check if EOA or external contract is whitelisted
     * @param _v1TokenId the v1 tokenID 
     * @return bool true if owner is whitelisted else return false
     */
<span class="fstat-no" title="function not covered" >    function isWhitelisted(uint256 _v1TokenId) external view virtual override returns (bool){</span>
<span class="cstat-no" title="statement not covered" >        return  (ownerWhiteList[_v1TokenId] == _msgSender())? true: false;</span>
&nbsp;
    }
&nbsp;
&nbsp;
    /**
     * @dev isPegged: Returns true if the V1 token has been transferred to this contract
     * @param _tokenId the v1 tokenID 
     * @return returns true if there's a peg
     */
<span class="fstat-no" title="function not covered" >    function isPegged(uint _tokenId) external virtual override view returns (bool) {</span>
<span class="cstat-no" title="statement not covered" >        return v1_v2_peg[_tokenId];</span>
    }
&nbsp;
    /**
     * @dev _setPeg: will set the v1_v2_peg[tokenId] to true if the contract owns the v1 token
     * @param _tokenId the v1 tokenID 
     * @return returns true if the peg assignment succeeds
     */
    function _setPeg(uint256 _tokenId) internal virtual  returns (bool) {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(supe.ownerOf(_tokenId)== address(this),"SupeRareV2: Unable to peg the V1 token!");
        v1_v2_peg[_tokenId] = true;
        emit Pegged(_tokenId);
        return true;
    }
&nbsp;
&nbsp;
&nbsp;
    /**
   * @notice mintV2, should allow a whitelisted owner to call mint, if it's a contract then it needs to implement the onERC721Received function 
   * @param _tokenId v1 tokenID
   * @return bool returns true if the operation succeeds
   * @dev emits a PositionCreated event
   */
    function mintV2(uint256 _tokenId) external virtual override <span class="missing-if-branch" title="else path not taken" >E</span>onlyWhitelisted(_tokenId) returns (bool) {
        <span class="missing-if-branch" title="else path not taken" >E</span>require(_setPeg(_tokenId),"SupeRareV2: Get added to whitelist, transfer the V1 token to this contract, then call mintV2!");
        _safeMint(_msgSender(), _tokenId);
        _setTokenURI(_tokenId, supe.tokenURI(_tokenId));
        v1_v2_peg[_tokenId]= true; 
        emit MintV2(_msgSender(),_tokenId);
        return true;
    }
&nbsp;
&nbsp;
&nbsp;
    /**
   * @notice withdraw, should allow the owner of a v2 token only for a pegged v1 token.
   * @param _tokenId is the v2 tokenID to be burned
   * @return bool true if the function succeeds in its operation
   * @dev emits a PositionDeleted event
   */
<span class="fstat-no" title="function not covered" >    function withdraw(uint256 _tokenId) external virtual override onlyOwnerOfToken(_tokenId) onlyPegged(_tokenId) returns (bool) {</span>
<span class="cstat-no" title="statement not covered" >        require(_msgSender()!= address(0),"SupeRareV2: Invalid recipient address!")</span>;
<span class="cstat-no" title="statement not covered" >        _burn(_tokenId)</span>;    
<span class="cstat-no" title="statement not covered" >         supe.transfer(_msgSender(),_tokenId)</span>;
        v1_v2_peg[_tokenId] = false;
<span class="cstat-no" title="statement not covered" >        emit WithdrawV1(_msgSender(),_tokenId);</span>
<span class="cstat-no" title="statement not covered" >        return true;</span>
    }
&nbsp;
&nbsp;
    /**
   * @notice safelyTransfer, should perform the ERC721 checks before transfering token to an external contract
   * @param from address of approved or sender
   * @param tokenId of the v2 token being transferred
   * @return bool true if the function succeeds in its operation
   * @dev emits a 'Transfer' event
   */
<span class="fstat-no" title="function not covered" >    function safelyTransfer(address from, address to, uint256 tokenId) external virtual override returns (bool) {</span>
<span class="cstat-no" title="statement not covered" >        safeTransferFrom(from, to, tokenId, "")</span>;
<span class="cstat-no" title="statement not covered" >        return true;</span>
    }
    
&nbsp;
    /**
   * @notice getSupeRareAddress returns the address of the SupeRareV1 contract
   * @return address of the V1 contract
   */
<span class="fstat-no" title="function not covered" >    function getSupeRareAddress() external view virtual override returns (address) {</span>
<span class="cstat-no" title="statement not covered" >        return OriginalSupeRareAddr_;</span>
    }
&nbsp;
&nbsp;
&nbsp;
      
    /**
   * @notice setTokenURI   //ERC721: Change the tokenURI if needed on a per token basis by only by the owner of this contract
   * @param _tokenId Owner's current V2 TokenID
   * @return bool returns true of the operation succeeds
   */
<span class="fstat-no" title="function not covered" >    function setTokenURI(uint256 _tokenId,string calldata _tokenURI) external virtual override onlyOwner returns (bool) {</span>
<span class="cstat-no" title="statement not covered" >         _setTokenURI(_tokenId, _tokenURI)</span>;
<span class="cstat-no" title="statement not covered" >        emit TokenURISet(_tokenId,_tokenURI);</span>
<span class="cstat-no" title="statement not covered" >        return true;</span>
    }
&nbsp;
&nbsp;
    /**
   * @notice setBaseURI   //ERC721: Change the tokenURI if needed on a per token basis only by the owner of this contract
   * @param baseURI Owner's current V2 TokenID
   * @return bool returns true of the operation succeeds
   */
<span class="fstat-no" title="function not covered" >    function setBaseURI(string calldata baseURI) external virtual override  onlyOwner returns (bool) {</span>
<span class="cstat-no" title="statement not covered" >        _setBaseURI(baseURI)</span>;
<span class="cstat-no" title="statement not covered" >        emit BaseURISet(baseURI);</span>
<span class="cstat-no" title="statement not covered" >        return true;</span>
    }
&nbsp;
&nbsp;
&nbsp;
    /// @return `bytes4(keccak256("onERC721Received(address,address,uint256,bytes)"))`
<span class="fstat-no" title="function not covered" >    function onERC721Received(address, address, uint256, bytes memory) public view virtual override returns (bytes4) {</span>
<span class="cstat-no" title="statement not covered" >        return _ERC721_RECEIVED;</span>
    }
&nbsp;
}</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Tue Jan 31 2023 15:19:54 GMT-0800 (Pacific Standard Time)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
